import matplotlib.pyplot as plt

# 准备数据
x_3B = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]
x_7B = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32]
x_13B =[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40]

mpt_squad = [5.091772556,3.907046556,16.46999931,5.303633213,6.394834995,8.054897308,8.697392464,9.109886169,8.754551888,8.772591591,8.784472466,8.880475044,9.282811165,9.725057602,9.977891922,10.38008022,10.68528175,10.87352371,11.08026981,11.05897331,11.07866478,10.71813869,10.74128914,9.624519348,9.246968269,8.626493454,8.121801376,7.78276825,7.573647499,7.554637909,9.491134644,4.701910973]
mpt_human = [0.963164806,0.77412945,1.675003648,0.910500348,1.053707957,1.227602959,1.428205013,1.543028593,1.704403043,1.872430682,1.976149559,2.060580015,2.249860287,2.459215879,2.540498257,2.621758699,2.56840229,2.626863956,2.590049028,2.410496235,2.316411495,2.260548592,2.08024931,1.953639984,1.768353701,1.634640694,1.525726318,1.472076654,1.358926415,1.468656182,1.504912376,0.917463064]
mpt_leval = [0.388005883,0.269761205,0.425730228,0.366069257,0.437864393,0.523738384,0.591144621,0.658029914,0.735140562,0.805546403,0.884111106,0.909062088,1.040310025,1.119761825,1.148552656,1.389894247,1.102283478,1.121546745,1.066649199,1.009937286,0.977768123,0.961288631,0.949328542,0.894889653,0.803966701,0.724517345,0.698665023,0.653396428,0.598654211,0.622506618,0.592285514,0.320054531]

# 创建一个画布
plt.figure(figsize=(10, 8))

# 绘制第一个折线图
plt.plot(x_7B, mpt_squad, label='SQuAD', color='blue', marker='o')  # 第一组数据
plt.plot(x_7B, mpt_human, label='Human_Eval', color='red', marker='s')   # 第二组数据
plt.plot(x_7B, mpt_leval, label='L-Eval', color='orange', marker='^')   # 第三组数据
# plt.title('Llama-2-7B')  # 设置标题
plt.xlabel('Layer', fontsize=24)  # 设置X轴标签
plt.ylabel('Gradient', fontsize=24)  # 设置Y轴标签
plt.xticks(fontsize=20)
plt.yticks(fontsize=20)

# 添加图例
plt.legend(fontsize=20)

# 调整子图之间的间距
plt.tight_layout()

# 显示图形
# plt.show()
# plt.savefig('./pics/same-gradient-peak-layer.png', format='png')
plt.savefig('pics/same-gradient-peak-layer-3.pdf', format='pdf', bbox_inches='tight', pad_inches=0.26)
