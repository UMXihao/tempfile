import matplotlib.pyplot as plt

# 准备数据
x_3B = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]
x_7B = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32]

# Orac-mini-7b
orac_attn = [0.513016999,0.297462702,0.307634771,0.55881387,0.531463265,0.538309097,0.540377855,0.485913485,0.522991359,0.540246964,0.510694444,0.479040235,0.525446415,0.532822669,0.566489339,0.551024616,0.565080643,0.574245691,0.597590864,0.595657349,0.622760415,0.591726303,0.643116593,0.638811231,0.619485259,0.487356335]
orac_ffn = [0.576841891,0.625990212,0.634484529,0.611171484,0.574040771,0.731922865,0.564186037,0.587461352,0.534604371,0.541148961,0.497524321,0.490652442,0.521852374,0.536117494,0.546227396,0.550693154,0.569270968,0.584941506,0.578622282,0.591607094,0.568443835,0.556539655,0.526029408,0.419332176,0.383562595,0.477694064]
# llama-2-7b
llama2_attn = [0.481965959,0.346103519,0.537751257,0.565156043,0.56738013,0.559931993,0.53853792,0.529623687,0.54483664,0.516034186,0.523322582,0.515079319,0.519070327,0.539962113,0.523609459,0.548379123,0.552347183,0.505150974,0.573077321,0.558434188,0.590033174,0.54904443,0.577509761,0.539740562,0.569126725,0.524085462,0.571941733,0.548019052,0.539800465,0.52360785,0.541775703,0.440784454]
llama2_ffn = [0.543779135,0.526636481,0.607168376,0.546187878,0.565793157,0.495216727,0.468763322,0.484192133,0.48186174,0.480311513,0.501715243,0.475964874,0.460321963,0.4809618,0.500235915,0.538607359,0.521383643,0.532841206,0.553977668,0.577956259,0.580506027,0.59450233,0.589837432,0.576080561,0.563759089,0.555866182,0.547561288,0.553736687,0.556135535,0.545972168,0.400334716,0.500022113]
# MPT-7B
mpt_attn = [0.407627404,0.486745,0.478631914,0.470067441,0.49897033,0.459129751,0.508226991,0.459522665,0.481561005,0.449791849,0.466579884,0.472351015,0.433137357,0.476739585,0.477517873,0.483039886,0.513161898,0.434908569,0.501808226,0.487949491,0.500864387,0.464964569,0.496378452,0.49516961,0.513828993,0.502682209,0.505407333,0.49609533,0.538107276,0.454184771,0.429329485,0.317689717]
mpt_ffn = [0.732119679,0.659540415,0.585486054,0.550405979,0.557619512,0.566278875,0.573993206,0.639273763,0.633008182,0.680023074,0.62830919,0.646032989,0.627548158,0.640056372,0.651330411,0.69045949,0.571686804,0.543390989,0.55365169,0.535824418,0.53535372,0.532195389,0.53343147,0.53173399,0.529640257,0.530113518,0.531967044,0.534115851,0.541060865,0.574988961,0.58117795,0.564477384]
# InternLM-7B
intern_attn = [0.513888717,0.836548328,0.555848777,0.579956591,0.572558224,0.490005195,0.507259607,0.461958736,0.428908288,0.420254469,0.507166386,0.4585706,0.460663438,0.46554634,0.484525412,0.423462272,0.468548149,0.545240164,0.505281031,0.661174178,0.545631826,0.580843985,0.620449781,0.654504895,0.556141257,0.559731245,0.510871112,0.624949992,0.543711901,0.560268939,0.436509907,0.339900315]
intern_ffn = [0.627594829,0.498413771,0.576830566,0.553730965,0.540354371,0.517537773,0.521592498,0.494768709,0.537891507,0.515724659,0.526023328,0.555612445,0.516351223,0.531686425,0.560255527,0.536980808,0.585835695,0.605749846,0.626579046,0.598960996,0.574074566,0.542311549,0.557068527,0.543526173,0.535650313,0.539795697,0.537755489,0.542247295,0.526221395,0.486820817,0.34652406,0.504836738]
# Vicuna-7B
vicuna_attn = [0.49287504,0.339615822,0.361951947,0.580296457,0.551971614,0.529360712,0.540655851,0.514414251,0.474513113,0.504539788,0.523783326,0.525785029,0.530918956,0.493520975,0.489523679,0.491713345,0.528057277,0.499806106,0.533750713,0.540119171,0.55710113,0.528367639,0.508402646,0.557852626,0.502469838,0.533551753,0.514151812,0.504731894,0.530690253,0.530487597,0.529681683,0.439668357]
vicuna_ffn = [0.595597625,0.643652737,0.660292149,0.524423599,0.650692761,0.482060552,0.475142866,0.477615923,0.473155797,0.476682961,0.472744495,0.471816629,0.478335112,0.462902516,0.493341267,0.506447196,0.523857713,0.534492433,0.545904279,0.551533878,0.557894826,0.558871567,0.551913381,0.551745415,0.539013028,0.531072199,0.529428303,0.527684748,0.517815948,0.501226783,0.40955162,0.481223971]

# 创建一个画布
plt.figure(figsize=(15, 3))  # 设置画布大小，宽度为15英寸，高度为5英寸

# 绘制第一个折线图
plt.subplot(1, 5, 1)  # 表示一行三列的第1个位置
plt.plot(x_3B, orac_attn, label='ATTN', color='blue', marker='o')  # 第一组数据
plt.plot(x_3B, orac_ffn, label='FFN', color='red', marker='s')   # 第二组数据
plt.title('Orac-mini-3B')  # 设置标题
plt.xlabel('Layer')  # 设置X轴标签
plt.ylabel('Similarity')  # 设置Y轴标签

# 绘制第二个折线图
plt.subplot(1, 5, 2)  # 表示一行三列的第2个位置
plt.plot(x_7B, llama2_attn, label='ATTN', color='blue', marker='o')  # 第一组数据
plt.plot(x_7B, llama2_ffn, label='FFN', color='red', marker='s') # 第二组数据
plt.title('Llama-2-7B')  # 设置标题
plt.xlabel('Layer')  # 设置X轴标签

# 绘制第三个折线图
plt.subplot(1, 5, 3)  # 表示一行三列的第3个位置
plt.plot(x_7B, mpt_attn, label='ATTN', color='blue', marker='o')  # 第一组数据
plt.plot(x_7B, mpt_ffn, label='FFN', color='red', marker='s')   # 第二组数据
plt.title('MPT-7B')  # 设置标题
plt.xlabel('Layer')  # 设置X轴标签

# 绘制第四个折线图
plt.subplot(1, 5, 4)  # 表示一行三列的第3个位置
plt.plot(x_7B, intern_attn, label='ATTN', color='blue', marker='o')  # 第一组数据
plt.plot(x_7B, intern_ffn, label='FFN', color='red', marker='s')   # 第二组数据
plt.title('InternLM2-7B')  # 设置标题
plt.xlabel('Layer')  # 设置X轴标签

# 绘制第五个折线图
plt.subplot(1, 5, 5)  # 表示一行三列的第3个位置
plt.plot(x_7B, vicuna_attn, label='ATTN', color='blue', marker='o')  # 第一组数据
plt.plot(x_7B, vicuna_ffn, label='FFN', color='red', marker='s')   # 第二组数据
plt.title('Vicuna-7B')  # 设置标题
plt.xlabel('Layer')  # 设置X轴标签
plt.legend()  # 显示图例

# 调整子图之间的间距
plt.tight_layout()

# 显示图形
# plt.show()
plt.savefig('./pics/model-attn-ffn-importance.png', format='png')